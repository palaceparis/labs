<!DOCTYPE html>
<!-- saved from url=(0082)https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#11_Who_has_diabetes -->
<html class="fontawesome-i2svg-active fontawesome-i2svg-complete"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<meta name="generator" content="pandoc">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE">




<title>Lab 4B: Week 12</title>

<script src="./Lab 4B_ Week 12_files/header-attrs.js.download"></script>
<script src="./Lab 4B_ Week 12_files/jquery.min.js.download"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style type="text/css">svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;overflow:visible;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom right;transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom left;transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top left;transform-origin:top left}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:solid .08em #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.fa-rotate-90{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-webkit-transform:scale(-1,1);transform:scale(-1,1)}.fa-flip-vertical{-webkit-transform:scale(1,-1);transform:scale(1,-1)}.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1,-1);transform:scale(-1,-1)}:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{-webkit-filter:none;filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1em}.svg-inline--fa.fa-stack-2x{height:2em;width:2em}.fa-inverse{color:#fff}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}</style><link href="./Lab 4B_ Week 12_files/paper.min.css" rel="stylesheet">
<script src="./Lab 4B_ Week 12_files/bootstrap.min.js.download"></script>
<script src="./Lab 4B_ Week 12_files/html5shiv.min.js.download"></script>
<script src="./Lab 4B_ Week 12_files/respond.min.js.download"></script>
<script src="./Lab 4B_ Week 12_files/jquery-ui.min.js.download"></script>
<link href="./Lab 4B_ Week 12_files/jquery.tocify.css" rel="stylesheet">
<script src="./Lab 4B_ Week 12_files/jquery.tocify.js.download"></script>
<script src="./Lab 4B_ Week 12_files/tabsets.js.download"></script>
<link href="./Lab 4B_ Week 12_files/anchor-sections.css" rel="stylesheet">
<script src="./Lab 4B_ Week 12_files/anchor-sections.js.download"></script>
<link href="./Lab 4B_ Week 12_files/all.css" rel="stylesheet">
<link href="./Lab 4B_ Week 12_files/v4-shims.css" rel="stylesheet">
<script defer="" src="./Lab 4B_ Week 12_files/all.js.download" integrity="sha384-d84LGg2pm9KhR4mCAs3N29GQ4OYNy+K+FBHX8WhimHpPm86c839++MDABegrZ3gn" crossorigin="anonymous"></script>

<!-- clipboard.js -->
<script src="./Lab 4B_ Week 12_files/clipboard.min.js.download" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<script src="./Lab 4B_ Week 12_files/clipboard.js.download"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="./Lab 4B_ Week 12_files/kbd.css" type="text/css">
<link rel="stylesheet" href="./Lab 4B_ Week 12_files/style.css" type="text/css">



<style type="text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 64px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h2 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h3 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h4 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h5 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h6 {
  padding-top: 69px;
  margin-top: -69px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



<script type="text/javascript" src="./Lab 4B_ Week 12_files/MathJax.js.download"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax_LineBox {display: table!important}
.MathJax_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Main-bold; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Main-italic; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Math-italic; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Caligraphic; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?V=2.7.2') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?V=2.7.2') format('woff'), url('https://mathjax.rstudio.com/latest/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?V=2.7.2') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>

<body cz-shortcut-listen="true"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
<ul id="tocify-header1" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="1_Questions" style="cursor: pointer;"><span class="header-section-number">1</span> Questions</li><ul class="tocify-subheader list-group" data-tag="2" style="display: block;"><li class="tocify-item list-group-item active" data-unique="11_Who_has_diabetes" style="cursor: pointer;"><span class="header-section-number">1.1</span> Who has diabetes?</li><ul class="tocify-subheader list-group" data-tag="3" style="display: block;"><li class="tocify-item list-group-item" data-unique="111_Logistic_regression"><span class="header-section-number">1.1.1</span> Logistic regression</li><li class="tocify-item list-group-item" data-unique="112_Random_forest" style="cursor: pointer;"><span class="header-section-number">1.1.2</span> Random forest</li><li class="tocify-item list-group-item" data-unique="113_k-nearest_neighbours" style="cursor: pointer;"><span class="header-section-number">1.1.3</span> k-nearest neighbours</li><li class="tocify-item list-group-item" data-unique="114_Comparison" style="cursor: pointer;"><span class="header-section-number">1.1.4</span> Comparison</li></ul></ul></ul><ul id="tocify-header2" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="2_For_practice_after_the_computer_lab" style="cursor: pointer;"><span class="header-section-number">2</span> For practice after the computer lab</li><ul class="tocify-subheader list-group" data-tag="2" style=""><li class="tocify-item list-group-item" data-unique="21_Violent_crime_rates_by_US_states"><span class="header-section-number">2.1</span> Violent crime rates by US states</li><ul class="tocify-subheader list-group" data-tag="3" style=""><li class="tocify-item list-group-item" data-unique="211_Hierarchical_clustering"><span class="header-section-number">2.1.1</span> Hierarchical clustering</li><li class="tocify-item list-group-item" data-unique="212_k-means"><span class="header-section-number">2.1.2</span> k-means</li></ul><li class="tocify-item list-group-item" data-unique="22_Who_has_diabetes_[Continued]"><span class="header-section-number">2.2</span> Who has diabetes? [Continued]</li><ul class="tocify-subheader list-group" data-tag="3" style=""><li class="tocify-item list-group-item" data-unique="221_Clustering_and_dimension_reduction"><span class="header-section-number">2.2.1</span> Clustering and dimension reduction</li></ul><li class="tocify-item list-group-item" data-unique="23_DataCamp"><span class="header-section-number">2.3</span> DataCamp</li></ul></ul><ul id="tocify-header3" class="tocify-header list-group"><li class="tocify-item list-group-item" data-unique="3_References" style="cursor: pointer;"><span class="header-section-number">3</span> References</li></ul></div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://pages.github.sydney.edu.au/DATA2002/2020/index.html"></a><a href="https://sydney.edu.au/"><img id="logo" style="width: 130px; margin: 7px 0px" src="./Lab 4B_ Week 12_files/USydLogo.svg"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://canvas.sydney.edu.au/courses/26417">Canvas</a>
</li>
<li>
  <a href="https://pages.github.sydney.edu.au/DATA2002/2020/index.html">
    <svg class="svg-inline--fa fa-home fa-w-18" aria-hidden="true" data-prefix="fa" data-icon="home" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" data-fa-i2svg=""><path fill="currentColor" d="M488 312.7V456c0 13.3-10.7 24-24 24H348c-6.6 0-12-5.4-12-12V356c0-6.6-5.4-12-12-12h-72c-6.6 0-12 5.4-12 12v112c0 6.6-5.4 12-12 12H112c-13.3 0-24-10.7-24-24V312.7c0-3.6 1.6-7 4.4-9.3l188-154.8c4.4-3.6 10.8-3.6 15.3 0l188 154.8c2.7 2.3 4.3 5.7 4.3 9.3zm83.6-60.9L488 182.9V44.4c0-6.6-5.4-12-12-12h-56c-6.6 0-12 5.4-12 12V117l-89.5-73.7c-17.7-14.6-43.3-14.6-61 0L4.4 251.8c-5.1 4.2-5.8 11.8-1.6 16.9l25.5 31c4.2 5.1 11.8 5.8 16.9 1.6l235.2-193.7c4.4-3.6 10.8-3.6 15.3 0l235.2 193.7c5.1 4.2 12.7 3.5 16.9-1.6l25.5-31c4.2-5.2 3.4-12.7-1.7-16.9z"></path></svg><!-- <span class="fa fa-home"></span> -->
     
    DATA2002
  </a>
</li>
<li>
  <a href="https://pages.github.sydney.edu.au/DATA2002/2020/data2902.html">DATA2902</a>
</li>
<li>
  <a href="https://pages.github.sydney.edu.au/DATA2002/2020/community.html">
    <svg class="svg-inline--fa fa-users fa-w-20" aria-hidden="true" data-prefix="fa" data-icon="users" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" data-fa-i2svg=""><path fill="currentColor" d="M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"></path></svg><!-- <span class="fa fa-users"></span> -->
     
    Community
  </a>
</li>
<li>
  <a href="https://pages.github.sydney.edu.au/DATA2002/2020/tips.html">
    <svg class="svg-inline--fa fa-star fa-w-18" aria-hidden="true" data-prefix="fa" data-icon="star" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" data-fa-i2svg=""><path fill="currentColor" d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"></path></svg><!-- <span class="fa fa-star"></span> -->
     
    Tips
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Lab 4B: Week 12</h1>

</div>


<p>The <strong>specific aims</strong> of this lab are:</p>
<ul>
<li>estimate logistic regression models</li>
<li>identify which variables are significant and perform model selection</li>
<li>interpret the coefficients from a logistic regression model</li>
<li>use decision trees and random forests for classification</li>
<li>evaluate out-of-sample performance using cross validation</li>
<li>use estimated prediction/classification models to predict the outcomes for new observations</li>
<li>perform classification using k-nearest neighbours and evaluate out-of-sample performance using cross validation</li>
<li>perform dimension reduction using PCA/SVD</li>
<li>perform cluster analysis using k-means and hierarchical approaches</li>
</ul>
<p>The unit <strong>learning outcomes</strong> addressed are:</p>
<ul>
<li>LO1 Formulate domain/context specific questions and identify appropriate statistical analysis.</li>
<li>LO3 Construct, interpret and compare numerical and graphical summaries of different data types including large and/or complex data sets.</li>
<li>LO7 Perform statistical machine learning using a given classifier, and create a cross-validation scheme to calculate the prediction accuracy.</li>
</ul>
<div id="questions" class="section level1" number="1">
<div name="1_Questions" data-unique="1_Questions"></div><h1 class="hasAnchor"><span class="header-section-number">1</span> Questions<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#questions" class="anchor-section"></a></h1>
<div id="who-has-diabetes" class="section level2" number="1.1">
<div name="11_Who_has_diabetes" data-unique="11_Who_has_diabetes"></div><h2 class="hasAnchor"><span class="header-section-number">1.1</span> Who has diabetes?<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#who-has-diabetes" class="anchor-section"></a></h2>
<p>This dataset is originally from the National Institute of Diabetes and Digestive and Kidney Diseases (Johannes, 1988). The objective is to predict whether or not a patient has diabetes based on certain clinical measurements. The larger database of patients has been subset such that all observations here are females at least 21 years old of Pima Indian heritage.</p>
<p>The data sets consists of several medical predictor variables and one target variable, <code>y</code> which equals 1 if an individual is diabetic and 0 otherwise. Predictor variables includes the number of pregnancies the patient has had (<code>npreg</code>), their BMI, insulin level (<code>serum</code>), age, triceps skin fold thickness <code>skin</code>, diastolic blood pressure (<code>bp</code>), plasma glucose concentration (<code>glu</code>) and diabetes pedigree function (<code>ped</code>).</p>
<p>It is available from various places, including <a href="https://www.kaggle.com/uciml/pima-indians-diabetes-database">Kaggle</a> and the <strong>reglogit</strong> R package and I’ve uploaded a copy to the <a href="https://raw.githubusercontent.com/DATA2002/data/master/pima.csv">GitHub server</a>.</p>
<div class="sourceCode hasCopyButton" id="cb1"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb1-2" aria-hidden="true" tabindex="-1"></a>pima <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/DATA2002/data/master/pima.csv"</span>)</span>
<span id="cb1-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(pima)</span></code></pre></div>
<pre><code>## Rows: 768
## Columns: 9
## $ npreg &lt;dbl&gt; 6, 1, 8, 1, 0, 5, 3, 10, 2, 8, 4, 10, 10, 1, 5, …
## $ glu   &lt;dbl&gt; 148, 85, 183, 89, 137, 116, 78, 115, 197, 125, 1…
## $ bp    &lt;dbl&gt; 72, 66, 64, 66, 40, 74, 50, 0, 70, 96, 92, 74, 8…
## $ skin  &lt;dbl&gt; 35, 29, 0, 23, 35, 0, 32, 0, 45, 0, 0, 0, 0, 23,…
## $ serum &lt;dbl&gt; 0, 0, 0, 94, 168, 0, 88, 0, 543, 0, 0, 0, 0, 846…
## $ bmi   &lt;dbl&gt; 34, 27, 23, 28, 43, 26, 31, 35, 30, 0, 38, 38, 2…
## $ ped   &lt;dbl&gt; 0.63, 0.35, 0.67, 0.17, 2.29, 0.20, 0.25, 0.13, …
## $ age   &lt;dbl&gt; 50, 31, 32, 21, 33, 30, 26, 29, 53, 54, 30, 34, …
## $ y     &lt;dbl&gt; 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, …</code></pre>
<ol style="list-style-type: decimal">
<li>Visualise the data and look for any obvious relationships or patterns in the data. Perform any data cleaning as appropriate.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb3"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb3-1" aria-hidden="true" tabindex="-1"></a>GGally<span class="sc">::</span><span class="fu">ggpairs</span>(pima, <span class="fu">aes</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>))</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-2-1.png" width="672"></p>
<p>Looks like there are some unwelcome zeros in the data. Let’s go variable by variable.</p>
<div class="sourceCode hasCopyButton" id="cb4"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb4-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">=</span> pima <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> npreg)) <span class="sc">+</span> <span class="fu">geom_bar</span>()</span>
<span id="cb4-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb4-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">=</span> pima <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb4-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb4-3" aria-hidden="true" tabindex="-1"></a>gridExtra<span class="sc">::</span><span class="fu">grid.arrange</span>(p1, p2, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-3-1.png" width="672"></p>
<div class="sourceCode hasCopyButton" id="cb5"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb5-1" aria-hidden="true" tabindex="-1"></a>p2dat <span class="ot">=</span> pima <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(glu<span class="sc">:</span>ped) <span class="sc">%&gt;%</span> <span class="fu">gather</span>()</span>
<span id="cb5-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(p2dat) <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> value) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>key, </span>
<span id="cb5-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">scales =</span> <span class="st">"free"</span>)</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-4-1.png" width="672"></p>
<p>The zeros in <code>bmi</code>, <code>bp</code>, <code>glu</code>, <code>serum</code> and <code>skin</code> don’t make sense. We could convert them to <code>NA</code> and drop them from the analysis:</p>
<div class="sourceCode hasCopyButton" id="cb6"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb6-1" aria-hidden="true" tabindex="-1"></a>pima_clean <span class="ot">=</span> pima <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb6-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb6-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb6-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="fu">c</span>(bmi, bp, glu, serum, skin),</span>
<span id="cb6-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb6-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">.fns =</span> <span class="sc">~</span> dplyr<span class="sc">::</span><span class="fu">na_if</span>(., <span class="dv">0</span>))</span>
<span id="cb6-5"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb6-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode hasCopyButton" id="cb7"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb7-1" aria-hidden="true" tabindex="-1"></a>visdat<span class="sc">::</span><span class="fu">vis_miss</span>(pima_clean) <span class="sc">+</span> </span>
<span id="cb7-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-6-1.png" width="672"></p>
<div class="sourceCode hasCopyButton" id="cb8"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb8-1" aria-hidden="true" tabindex="-1"></a>pima_red <span class="ot">=</span> pima_clean <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span>
<span id="cb8-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(pima_red)</span></code></pre></div>
<pre><code>## [1] 392</code></pre>
<p>We can see that the serum variable is particularly troublesome with almost half of the observations missing. The <code>skin</code> variable also has a substantial proportion of missing values.</p>
<p>If we drop any observations that have a missing value, this leaves us with only 392 from the original 768 data (around half of the observations had at least one missing value).</p>
<p>Another alternative is to <strong>impute</strong> the missing values. A simple way to do this is to replace any <code>NA</code> values with the mean of that variable.</p>
<div class="sourceCode hasCopyButton" id="cb10"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb10-1" aria-hidden="true" tabindex="-1"></a>pima_impute <span class="ot">=</span> pima <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(bmi, bp, glu, serum, skin),</span>
<span id="cb10-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb10-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">ifelse</span>(. <span class="sc">==</span> <span class="dv">0</span>, <span class="fu">mean</span>(., <span class="at">na.rm=</span> <span class="cn">TRUE</span>), .))</span>
<span id="cb10-5"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb10-5" aria-hidden="true" tabindex="-1"></a>  ) </span></code></pre></div>
<p>If we proceeded with the <code>pima_impute</code> data, we would need to be cautious about reading too much into the results about the serum and skin variables.</p>
<p>Equally, proceeding with the reduced data set might mean we’re excluding an important subset of people, those who don’t have access to medical facilities capable of taking insulin measurements.</p>
<p>For now, let’s proceed with the imputed data set but we’ll remove the problematic <code>skin</code> and <code>serum</code> variables from consideration.</p>
<div class="sourceCode hasCopyButton" id="cb11"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb11-1" aria-hidden="true" tabindex="-1"></a>pima_final <span class="ot">=</span> pima_impute <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>serum, <span class="sc">-</span>skin)</span>
<span id="cb11-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb11-2" aria-hidden="true" tabindex="-1"></a>GGally<span class="sc">::</span><span class="fu">ggpairs</span>(pima_final, <span class="fu">aes</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>))</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-8-1.png" width="672"></p>
</font><p><font color="blue"></font></p>
<div id="logistic-regression" class="section level3" number="1.1.1">
<div name="111_Logistic_regression" data-unique="111_Logistic_regression"></div><h3 class="hasAnchor"><span class="header-section-number">1.1.1</span> Logistic regression<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#logistic-regression" class="anchor-section"></a></h3>
<ol start="2" style="list-style-type: decimal">
<li>Fit a logistic regression to the data and perform backward stepwise model selection using the AIC.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb12"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb12-1" aria-hidden="true" tabindex="-1"></a>fm <span class="ot">=</span> <span class="fu">glm</span>(y <span class="sc">~</span> ., <span class="at">data =</span> pima_final, <span class="at">family =</span> binomial)</span>
<span id="cb12-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb12-2" aria-hidden="true" tabindex="-1"></a>step_model <span class="ot">=</span> <span class="fu">step</span>(fm, <span class="at">trace =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode hasCopyButton" id="cb13"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb13-1" aria-hidden="true" tabindex="-1"></a>stargazer<span class="sc">::</span><span class="fu">stargazer</span>(fm, step_model, <span class="at">type =</span> <span class="st">"html"</span>, <span class="at">column.labels =</span> <span class="fu">c</span>(<span class="st">"Full model"</span>, </span>
<span id="cb13-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Stepwise"</span>))</span></code></pre></div>
<table style="text-align:center">
<tbody><tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="2">
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="2">
y
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
Full model
</td>
<td>
Stepwise
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1)
</td>
<td>
(2)
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
npreg
</td>
<td>
0.120<sup>***</sup>
</td>
<td>
0.120<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.032)
</td>
<td>
(0.032)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
glu
</td>
<td>
0.033<sup>***</sup>
</td>
<td>
0.033<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.003)
</td>
<td>
(0.003)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
bp
</td>
<td>
-0.013<sup>***</sup>
</td>
<td>
-0.013<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.005)
</td>
<td>
(0.005)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
bmi
</td>
<td>
0.088<sup>***</sup>
</td>
<td>
0.088<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.014)
</td>
<td>
(0.014)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
ped
</td>
<td>
0.900<sup>***</sup>
</td>
<td>
0.900<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.290)
</td>
<td>
(0.290)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
age
</td>
<td>
0.016<sup>*</sup>
</td>
<td>
0.016<sup>*</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.009)
</td>
<td>
(0.009)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
-8.200<sup>***</sup>
</td>
<td>
-8.200<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.700)
</td>
<td>
(0.700)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
768
</td>
<td>
768
</td>
</tr>
<tr>
<td style="text-align:left">
Log Likelihood
</td>
<td>
-363.000
</td>
<td>
-363.000
</td>
</tr>
<tr>
<td style="text-align:left">
Akaike Inf. Crit.
</td>
<td>
739.000
</td>
<td>
739.000
</td>
</tr>
<tr>
<td colspan="3" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td colspan="2" style="text-align:right">
<sup><em></em></sup><em>p&lt;0.1; <sup><strong></strong></sup><strong>p&lt;0.05; <sup></sup></strong></em>p&lt;0.01
</td>
</tr>
</tbody></table>
</font><p><font color="blue"></font></p>
<ol start="3" style="list-style-type: decimal">
<li>In the stepwise model, increases in which variables lead to higher odds of diabetes?</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<p>Number of times pregnant, glucose, BMI and diabetes pedigree function are all significantly positively associated with diabetes</p>
</font><p><font color="blue"></font></p>
<ol start="4" style="list-style-type: decimal">
<li>Write down the fitted stepwise model.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb14"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(equatiomatic)</span>
<span id="cb14-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">extract_eq</span>(step_model, <span class="at">use_coefs =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><span class="math display"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;y&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;1&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;y&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;1&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;8.24&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;0.12&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;npreg&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;0.03&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;glu&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;0.01&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;bp&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;0.09&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;bmi&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;0.9&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;ped&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;0.02&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;age&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;&amp;#x03F5;&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 56.182em; display: inline-block;"><span style="display: inline-block; position: relative; width: 46.031em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.706em, 1046.03em, 4.606em, -999.997em); top: -3.402em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Main;">log</span><span class="mo" id="MathJax-Span-4"></span><span class="mrow" id="MathJax-Span-5"><span class="mo" id="MathJax-Span-6" style="vertical-align: 0em;"><span style="font-family: MathJax_Size3;">[</span></span><span class="mfrac" id="MathJax-Span-7"><span style="display: inline-block; position: relative; width: 5.741em; height: 0px; margin-right: 0.129em; margin-left: 0.129em;"><span style="position: absolute; clip: rect(3.03em, 1003.72em, 4.417em, -999.997em); top: -4.726em; left: 50%; margin-left: -1.888em;"><span class="mrow" id="MathJax-Span-8"><span class="mi" id="MathJax-Span-9" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.129em;"></span></span><span class="mo" id="MathJax-Span-10" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-11" style="font-family: MathJax_Main;">y</span><span class="mo" id="MathJax-Span-12" style="font-family: MathJax_Main; padding-left: 0.255em;">=</span><span class="mi" id="MathJax-Span-13" style="font-family: MathJax_Main; padding-left: 0.255em;">1</span><span class="mo" id="MathJax-Span-14" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span><span style="position: absolute; clip: rect(3.03em, 1005.55em, 4.417em, -999.997em); top: -3.212em; left: 50%; margin-left: -2.834em;"><span class="mrow" id="MathJax-Span-15"><span class="mn" id="MathJax-Span-16" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-17" style="font-family: MathJax_Main; padding-left: 0.255em;">−</span><span class="mi" id="MathJax-Span-18" style="font-family: MathJax_Math-italic; padding-left: 0.255em;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.129em;"></span></span><span class="mo" id="MathJax-Span-19" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-20" style="font-family: MathJax_Main;">y</span><span class="mo" id="MathJax-Span-21" style="font-family: MathJax_Main; padding-left: 0.255em;">=</span><span class="mi" id="MathJax-Span-22" style="font-family: MathJax_Main; padding-left: 0.255em;">1</span><span class="mo" id="MathJax-Span-23" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span><span style="position: absolute; clip: rect(0.823em, 1005.74em, 1.264em, -999.997em); top: -1.258em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 5.741em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.075em;"></span></span></span></span><span class="mo" id="MathJax-Span-24" style="vertical-align: 0em;"><span style="font-family: MathJax_Size3;">]</span></span></span><span class="mo" id="MathJax-Span-25" style="font-family: MathJax_Main; padding-left: 0.255em;">=</span><span class="mo" id="MathJax-Span-26" style="font-family: MathJax_Main; padding-left: 0.255em;">−</span><span class="mn" id="MathJax-Span-27" style="font-family: MathJax_Main;">8.24</span><span class="mo" id="MathJax-Span-28" style="font-family: MathJax_Main; padding-left: 0.255em;">+</span><span class="mn" id="MathJax-Span-29" style="font-family: MathJax_Main; padding-left: 0.255em;">0.12</span><span class="mo" id="MathJax-Span-30" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-31" style="font-family: MathJax_Main;">npreg</span><span class="mo" id="MathJax-Span-32" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-33" style="font-family: MathJax_Main; padding-left: 0.255em;">+</span><span class="mn" id="MathJax-Span-34" style="font-family: MathJax_Main; padding-left: 0.255em;">0.03</span><span class="mo" id="MathJax-Span-35" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-36" style="font-family: MathJax_Main;">glu</span><span class="mo" id="MathJax-Span-37" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-38" style="font-family: MathJax_Main; padding-left: 0.255em;">−</span><span class="mn" id="MathJax-Span-39" style="font-family: MathJax_Main; padding-left: 0.255em;">0.01</span><span class="mo" id="MathJax-Span-40" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-41" style="font-family: MathJax_Main;">bp</span><span class="mo" id="MathJax-Span-42" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-43" style="font-family: MathJax_Main; padding-left: 0.255em;">+</span><span class="mn" id="MathJax-Span-44" style="font-family: MathJax_Main; padding-left: 0.255em;">0.09</span><span class="mo" id="MathJax-Span-45" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-46" style="font-family: MathJax_Main;">bmi</span><span class="mo" id="MathJax-Span-47" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-48" style="font-family: MathJax_Main; padding-left: 0.255em;">+</span><span class="mn" id="MathJax-Span-49" style="font-family: MathJax_Main; padding-left: 0.255em;">0.9</span><span class="mo" id="MathJax-Span-50" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-51" style="font-family: MathJax_Main;">ped</span><span class="mo" id="MathJax-Span-52" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-53" style="font-family: MathJax_Main; padding-left: 0.255em;">+</span><span class="mn" id="MathJax-Span-54" style="font-family: MathJax_Main; padding-left: 0.255em;">0.02</span><span class="mo" id="MathJax-Span-55" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-56" style="font-family: MathJax_Main;">age</span><span class="mo" id="MathJax-Span-57" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-58" style="font-family: MathJax_Main; padding-left: 0.255em;">+</span><span class="mi" id="MathJax-Span-59" style="font-family: MathJax_Math-italic; padding-left: 0.255em;">ϵ</span></span><span style="display: inline-block; width: 0px; height: 3.408em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.304em; border-left: 0px solid; width: 0px; height: 3.235em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>log</mi><mo>⁡</mo><mrow><mo>[</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><mi mathvariant="normal">y</mi><mo>=</mo><mi mathvariant="normal">1</mi><mo stretchy="false">)</mo></mrow><mrow><mn>1</mn><mo>−</mo><mi>P</mi><mo stretchy="false">(</mo><mi mathvariant="normal">y</mi><mo>=</mo><mi mathvariant="normal">1</mi><mo stretchy="false">)</mo></mrow></mfrac><mo>]</mo></mrow><mo>=</mo><mo>−</mo><mn>8.24</mn><mo>+</mo><mn>0.12</mn><mo stretchy="false">(</mo><mi>npreg</mi><mo stretchy="false">)</mo><mo>+</mo><mn>0.03</mn><mo stretchy="false">(</mo><mi>glu</mi><mo stretchy="false">)</mo><mo>−</mo><mn>0.01</mn><mo stretchy="false">(</mo><mi>bp</mi><mo stretchy="false">)</mo><mo>+</mo><mn>0.09</mn><mo stretchy="false">(</mo><mi>bmi</mi><mo stretchy="false">)</mo><mo>+</mo><mn>0.9</mn><mo stretchy="false">(</mo><mi>ped</mi><mo stretchy="false">)</mo><mo>+</mo><mn>0.02</mn><mo stretchy="false">(</mo><mi>age</mi><mo stretchy="false">)</mo><mo>+</mo><mi>ϵ</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-1">
\log\left[ \frac { P( \operatorname{y} = \operatorname{1} ) }{ 1 - P( \operatorname{y} = \operatorname{1} ) } \right] = -8.24 + 0.12(\operatorname{npreg}) + 0.03(\operatorname{glu}) - 0.01(\operatorname{bp}) + 0.09(\operatorname{bmi}) + 0.9(\operatorname{ped}) + 0.02(\operatorname{age}) + \epsilon
</script></span></p>
</font><p><font color="blue"></font></p>
<ol start="5" style="list-style-type: decimal">
<li>Predict the log-odds and the probability of a 35 year old woman who has been pregnant twice, with a BMI of 30, blood pressure of 72, glucose of 122 and diabetes pedigree function of 0.5. Compare it to another woman with the same measurements, except a BMI of 40.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb15"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb15-1" aria-hidden="true" tabindex="-1"></a>new_data <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">age =</span> <span class="fu">c</span>(<span class="dv">35</span>, <span class="dv">35</span>), </span>
<span id="cb15-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb15-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">npreg =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>), </span>
<span id="cb15-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb15-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">bp =</span> <span class="fu">c</span>(<span class="dv">72</span>, <span class="dv">72</span>),</span>
<span id="cb15-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb15-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">bmi =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">40</span>), </span>
<span id="cb15-5"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb15-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">glu =</span> <span class="fu">c</span>(<span class="dv">122</span>, <span class="dv">122</span>), </span>
<span id="cb15-6"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb15-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">ped =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb15-7"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(step_model, new_data, <span class="at">type =</span> <span class="st">"link"</span>)</span></code></pre></div>
<pre><code>##     1     2 
## -1.23 -0.35</code></pre>
<div class="sourceCode hasCopyButton" id="cb17"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy="" data-original-title="Copied!"><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(step_model, new_data, <span class="at">type =</span> <span class="st">"response"</span>)</span></code></pre></div>
<pre><code>##    1    2 
## 0.23 0.41</code></pre>
</font><p><font color="blue"></font></p>
<ol start="6" style="list-style-type: decimal">
<li>Generate a <strong>confusion matrix</strong> to assess the in-sample accuracy of the predictions from the stepwise model.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb19"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb19-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb19-2" aria-hidden="true" tabindex="-1"></a>preds <span class="ot">=</span> <span class="fu">as.factor</span>(<span class="fu">round</span>(<span class="fu">predict</span>(step_model, <span class="at">type =</span> <span class="st">"response"</span>)))</span>
<span id="cb19-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb19-3" aria-hidden="true" tabindex="-1"></a>truth <span class="ot">=</span> <span class="fu">as.factor</span>(pima_final<span class="sc">$</span>y)</span>
<span id="cb19-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(<span class="at">data =</span> preds, <span class="at">reference =</span> truth, <span class="at">positive =</span> <span class="st">"1"</span>)</span></code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction   0   1
##          0 439 113
##          1  61 155
##                                         
##                Accuracy : 0.773         
##                  95% CI : (0.742, 0.803)
##     No Information Rate : 0.651         
##     P-Value [Acc &gt; NIR] : 1.18e-13      
##                                         
##                   Kappa : 0.478         
##                                         
##  Mcnemar's Test P-Value : 0.00011       
##                                         
##             Sensitivity : 0.578         
##             Specificity : 0.878         
##          Pos Pred Value : 0.718         
##          Neg Pred Value : 0.795         
##              Prevalence : 0.349         
##          Detection Rate : 0.202         
##    Detection Prevalence : 0.281         
##       Balanced Accuracy : 0.728         
##                                         
##        'Positive' Class : 1             
## </code></pre>
<p>The overall accuracy is 0.77.</p>
</font><p><font color="blue"></font></p>
<ol start="7" style="list-style-type: decimal">
<li>What is the sensitivity and specificity of using our stepwise model as a diagnostic tool to predict diabetes?</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<p>Recall the sensitivity is <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;/msup&gt;&lt;mtext&gt;&amp;#xA0;&lt;/mtext&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mtext&gt;&amp;#xA0;&lt;/mtext&gt;&lt;msup&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-60" style="width: 6.245em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.11em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.327em, 1004.98em, 2.714em, -999.997em); top: -2.267em; left: 0em;"><span class="mrow" id="MathJax-Span-61"><span class="mi" id="MathJax-Span-62" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.129em;"></span></span><span class="mo" id="MathJax-Span-63" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-64"><span style="display: inline-block; position: relative; width: 1.327em; height: 0px;"><span style="position: absolute; clip: rect(3.093em, 1000.63em, 4.165em, -999.997em); top: -3.969em; left: 0em;"><span class="mi" id="MathJax-Span-65" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span><span style="position: absolute; top: -4.347em; left: 0.697em;"><span class="mo" id="MathJax-Span-66" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span></span></span><span class="mtext" id="MathJax-Span-67" style="font-family: MathJax_Main;">&nbsp;</span><span class="texatom" id="MathJax-Span-68"><span class="mrow" id="MathJax-Span-69"><span class="mo" id="MathJax-Span-70" style="font-family: MathJax_Main;">|</span></span></span><span class="mtext" id="MathJax-Span-71" style="font-family: MathJax_Main;">&nbsp;</span><span class="msubsup" id="MathJax-Span-72"><span style="display: inline-block; position: relative; width: 1.453em; height: 0px;"><span style="position: absolute; clip: rect(3.093em, 1000.82em, 4.165em, -999.997em); top: -3.969em; left: 0em;"><span class="mi" id="MathJax-Span-73" style="font-family: MathJax_Math-italic;">D</span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span><span style="position: absolute; top: -4.347em; left: 0.823em;"><span class="mo" id="MathJax-Span-74" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span></span></span><span class="mo" id="MathJax-Span-75" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.273em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.381em; border-left: 0px solid; width: 0px; height: 1.388em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo stretchy="false">(</mo><msup><mi>S</mi><mo>+</mo></msup><mtext>&nbsp;</mtext><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mtext>&nbsp;</mtext><msup><mi>D</mi><mo>+</mo></msup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-2">P(S^+ ~|~ D^+)</script></span> i.e.&nbsp;the probability of the test saying you test positive for diabetes, given that you actually have diabetes. From the confusion matrix we can estimate this by looking down the reference column with 1 as the header: <span class="math display"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mfrac&gt;&lt;mn&gt;155&lt;/mn&gt;&lt;mrow&gt;&lt;mn&gt;155&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;113&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;0.578&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-76" style="width: 10.091em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.263em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(0.76em, 1008.2em, 3.219em, -999.997em); top: -2.267em; left: 0em;"><span class="mrow" id="MathJax-Span-77"><span class="mfrac" id="MathJax-Span-78"><span style="display: inline-block; position: relative; width: 4.417em; height: 0px; margin-right: 0.129em; margin-left: 0.129em;"><span style="position: absolute; clip: rect(3.093em, 1001.45em, 4.165em, -999.997em); top: -4.663em; left: 50%; margin-left: -0.753em;"><span class="mn" id="MathJax-Span-79" style="font-family: MathJax_Main;">155</span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span><span style="position: absolute; clip: rect(3.093em, 1004.23em, 4.228em, -999.997em); top: -3.276em; left: 50%; margin-left: -2.141em;"><span class="mrow" id="MathJax-Span-80"><span class="mn" id="MathJax-Span-81" style="font-family: MathJax_Main;">155</span><span class="mo" id="MathJax-Span-82" style="font-family: MathJax_Main; padding-left: 0.255em;">+</span><span class="mn" id="MathJax-Span-83" style="font-family: MathJax_Main; padding-left: 0.255em;">113</span></span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span><span style="position: absolute; clip: rect(0.823em, 1004.42em, 1.264em, -999.997em); top: -1.258em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 4.417em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.075em;"></span></span></span></span><span class="mo" id="MathJax-Span-84" style="font-family: MathJax_Main; padding-left: 0.255em;">=</span><span class="mn" id="MathJax-Span-85" style="font-family: MathJax_Main; padding-left: 0.255em;">0.578</span></span><span style="display: inline-block; width: 0px; height: 2.273em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.996em; border-left: 0px solid; width: 0px; height: 2.696em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mfrac><mn>155</mn><mrow><mn>155</mn><mo>+</mo><mn>113</mn></mrow></mfrac><mo>=</mo><mn>0.578</mn></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-3">\frac{155}{155+113} = 0.578</script></span></p>
<p>Recall the specificity is <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;/msup&gt;&lt;mtext&gt;&amp;#xA0;&lt;/mtext&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mtext&gt;&amp;#xA0;&lt;/mtext&gt;&lt;msup&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-86" style="width: 6.245em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.11em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.327em, 1004.98em, 2.714em, -999.997em); top: -2.267em; left: 0em;"><span class="mrow" id="MathJax-Span-87"><span class="mi" id="MathJax-Span-88" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.129em;"></span></span><span class="mo" id="MathJax-Span-89" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-90"><span style="display: inline-block; position: relative; width: 1.327em; height: 0px;"><span style="position: absolute; clip: rect(3.093em, 1000.63em, 4.165em, -999.997em); top: -3.969em; left: 0em;"><span class="mi" id="MathJax-Span-91" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span><span style="position: absolute; top: -4.347em; left: 0.697em;"><span class="mo" id="MathJax-Span-92" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span></span></span><span class="mtext" id="MathJax-Span-93" style="font-family: MathJax_Main;">&nbsp;</span><span class="texatom" id="MathJax-Span-94"><span class="mrow" id="MathJax-Span-95"><span class="mo" id="MathJax-Span-96" style="font-family: MathJax_Main;">|</span></span></span><span class="mtext" id="MathJax-Span-97" style="font-family: MathJax_Main;">&nbsp;</span><span class="msubsup" id="MathJax-Span-98"><span style="display: inline-block; position: relative; width: 1.453em; height: 0px;"><span style="position: absolute; clip: rect(3.093em, 1000.82em, 4.165em, -999.997em); top: -3.969em; left: 0em;"><span class="mi" id="MathJax-Span-99" style="font-family: MathJax_Math-italic;">D</span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span><span style="position: absolute; top: -4.347em; left: 0.823em;"><span class="mo" id="MathJax-Span-100" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span></span></span><span class="mo" id="MathJax-Span-101" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.273em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.381em; border-left: 0px solid; width: 0px; height: 1.388em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo stretchy="false">(</mo><msup><mi>S</mi><mo>−</mo></msup><mtext>&nbsp;</mtext><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mtext>&nbsp;</mtext><msup><mi>D</mi><mo>−</mo></msup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-4">P(S^- ~|~ D^-)</script></span>, i.e.&nbsp;the probability of the test saying you test negative for diabetes, given that you actually don’t have diabetes. From the confusion matrix, we can estimate this by looking down the reference column with 0 as the header: <span class="math display"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mfrac&gt;&lt;mn&gt;439&lt;/mn&gt;&lt;mrow&gt;&lt;mn&gt;439&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;61&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;0.878&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-102" style="width: 9.461em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.759em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(0.76em, 1007.7em, 3.219em, -999.997em); top: -2.267em; left: 0em;"><span class="mrow" id="MathJax-Span-103"><span class="mfrac" id="MathJax-Span-104"><span style="display: inline-block; position: relative; width: 3.912em; height: 0px; margin-right: 0.129em; margin-left: 0.129em;"><span style="position: absolute; clip: rect(3.093em, 1001.45em, 4.165em, -999.997em); top: -4.663em; left: 50%; margin-left: -0.753em;"><span class="mn" id="MathJax-Span-105" style="font-family: MathJax_Main;">439</span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span><span style="position: absolute; clip: rect(3.093em, 1003.72em, 4.228em, -999.997em); top: -3.276em; left: 50%; margin-left: -1.888em;"><span class="mrow" id="MathJax-Span-106"><span class="mn" id="MathJax-Span-107" style="font-family: MathJax_Main;">439</span><span class="mo" id="MathJax-Span-108" style="font-family: MathJax_Main; padding-left: 0.255em;">+</span><span class="mn" id="MathJax-Span-109" style="font-family: MathJax_Main; padding-left: 0.255em;">61</span></span><span style="display: inline-block; width: 0px; height: 3.975em;"></span></span><span style="position: absolute; clip: rect(0.823em, 1003.91em, 1.264em, -999.997em); top: -1.258em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 3.912em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.075em;"></span></span></span></span><span class="mo" id="MathJax-Span-110" style="font-family: MathJax_Main; padding-left: 0.255em;">=</span><span class="mn" id="MathJax-Span-111" style="font-family: MathJax_Main; padding-left: 0.255em;">0.878</span></span><span style="display: inline-block; width: 0px; height: 2.273em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.996em; border-left: 0px solid; width: 0px; height: 2.773em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mfrac><mn>439</mn><mrow><mn>439</mn><mo>+</mo><mn>61</mn></mrow></mfrac><mo>=</mo><mn>0.878</mn></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-5">\frac{439}{439 + 61} = 0.878</script></span></p>
<p>So our logistic regression diagnostic tool isn’t particularly sensitive nor very specific.</p>
</font><p><font color="blue"></font></p>
<ol start="8" style="list-style-type: decimal">
<li>Perform 5 fold cross validation to get an idea of out of sample accuracy for the stepwise model.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb21"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2018</span>)</span>
<span id="cb21-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb21-2" aria-hidden="true" tabindex="-1"></a>caret<span class="sc">::</span><span class="fu">train</span>(<span class="fu">factor</span>(y) <span class="sc">~</span> npreg <span class="sc">+</span> glu <span class="sc">+</span> bmi <span class="sc">+</span> ped, <span class="at">data =</span> pima_final, </span>
<span id="cb21-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"glm"</span>, <span class="at">family =</span> <span class="st">"binomial"</span>, <span class="at">trControl =</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"cv"</span>, </span>
<span id="cb21-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb21-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">number =</span> <span class="dv">5</span>))</span></code></pre></div>
<pre><code>## Generalized Linear Model 
## 
## 768 samples
##   4 predictor
##   2 classes: '0', '1' 
## 
## No pre-processing
## Resampling: Cross-Validated (5 fold) 
## Summary of sample sizes: 614, 614, 615, 615, 614 
## Resampling results:
## 
##   Accuracy  Kappa
##   0.76      0.45</code></pre>
</font><p><font color="blue"></font></p>
</div>
<div id="random-forest" class="section level3" number="1.1.2">
<div name="112_Random_forest" data-unique="112_Random_forest"></div><h3 class="hasAnchor"><span class="header-section-number">1.1.2</span> Random forest<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#random-forest" class="anchor-section"></a></h3>
<ol start="9" style="list-style-type: decimal">
<li>Fit and visualise a decision tree to this data.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb23"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart)</span>
<span id="cb23-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb23-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb23-3" aria-hidden="true" tabindex="-1"></a>tree <span class="ot">=</span> <span class="fu">rpart</span>(<span class="fu">factor</span>(y) <span class="sc">~</span> ., <span class="at">data =</span> pima_final)</span>
<span id="cb23-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rpart.plot</span>(tree, <span class="at">cex =</span> <span class="fl">1.1</span>)</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-15-1.png" width="1152"></p>
<div class="sourceCode hasCopyButton" id="cb24"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(partykit)</span>
<span id="cb24-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.party</span>(tree))</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-15-2.png" width="1152"></p>
</font><p><font color="blue"></font></p>
<ol start="10" style="list-style-type: decimal">
<li>Predict the outcomes for the two women described earlier using your estimated tree.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb25"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(tree, new_data, <span class="at">type =</span> <span class="st">"class"</span>)</span></code></pre></div>
<pre><code>## 1 2 
## 0 0 
## Levels: 0 1</code></pre>
</font><p><font color="blue"></font></p>
<ol start="11" style="list-style-type: decimal">
<li>Evaluate in-sample performance using a confusion matrix (e.g.&nbsp;using the <code>confusionMatrix()</code> function from the <strong>caret</strong> package).</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb27"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(<span class="fu">predict</span>(tree, <span class="at">type =</span> <span class="st">"class"</span>), truth)</span></code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction   0   1
##          0 453  82
##          1  47 186
##                                         
##                Accuracy : 0.832         
##                  95% CI : (0.804, 0.858)
##     No Information Rate : 0.651         
##     P-Value [Acc &gt; NIR] : &lt; 2e-16       
##                                         
##                   Kappa : 0.619         
##                                         
##  Mcnemar's Test P-Value : 0.00276       
##                                         
##             Sensitivity : 0.906         
##             Specificity : 0.694         
##          Pos Pred Value : 0.847         
##          Neg Pred Value : 0.798         
##              Prevalence : 0.651         
##          Detection Rate : 0.590         
##    Detection Prevalence : 0.697         
##       Balanced Accuracy : 0.800         
##                                         
##        'Positive' Class : 0             
## </code></pre>
<p>The in-sample accuracy is 0.83, a little better than the logistic regression in-sample accuracy of 0.77.</p>
</font><p><font color="blue"></font></p>
<ol start="12" style="list-style-type: decimal">
<li>Evaluate out-of-sample performance using 5 fold cross validation</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb29"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">train</span>(<span class="fu">factor</span>(y) <span class="sc">~</span> ., <span class="at">data =</span> pima_final, <span class="at">method =</span> <span class="st">"rpart"</span>, <span class="at">trControl =</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"cv"</span>, </span>
<span id="cb29-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">number =</span> <span class="dv">5</span>))</span></code></pre></div>
<pre><code>## CART 
## 
## 768 samples
##   6 predictor
##   2 classes: '0', '1' 
## 
## No pre-processing
## Resampling: Cross-Validated (5 fold) 
## Summary of sample sizes: 615, 614, 614, 615, 614 
## Resampling results across tuning parameters:
## 
##   cp     Accuracy  Kappa
##   0.017  0.74      0.41 
##   0.104  0.72      0.35 
##   0.243  0.68      0.18 
## 
## Accuracy was used to select the optimal model using the
##  largest value.
## The final value used for the model was cp = 0.017.</code></pre>
<p>The tree with the highest out of sample accuracy has a complexity parameter of 0.017. This gave an out of sample accuracy of 0.74, which is a little worse than the logistic regression’s 0.77. It appears that the decision tree is over-fitting slightly which drags down its out of sample performance.</p>
</font><p><font color="blue"></font></p>
<ol start="13" style="list-style-type: decimal">
<li>Fit a random forest and assess out of bag performance.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb31"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span>
<span id="cb31-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2018</span>)</span>
<span id="cb31-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb31-3" aria-hidden="true" tabindex="-1"></a>rf <span class="ot">=</span> <span class="fu">randomForest</span>(<span class="fu">factor</span>(y) <span class="sc">~</span> ., <span class="at">data =</span> pima_final)</span>
<span id="cb31-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb31-4" aria-hidden="true" tabindex="-1"></a>rf</span></code></pre></div>
<pre><code>## 
## Call:
##  randomForest(formula = factor(y) ~ ., data = pima_final) 
##                Type of random forest: classification
##                      Number of trees: 500
## No. of variables tried at each split: 2
## 
##         OOB estimate of  error rate: 23%
## Confusion matrix:
##     0   1 class.error
## 0 427  73        0.15
## 1 104 164        0.39</code></pre>
<p>The random forest has an out of bag error rate of 23.44% which corresponds to an out of bag accuracy of 76.56, a little better than the decision tree’s accuracy and comparable with the logistic regression model.</p>
</font><p><font color="blue"></font></p>
</div>
<div id="k-nearest-neighbours" class="section level3" number="1.1.3">
<div name="113_k-nearest_neighbours" data-unique="113_k-nearest_neighbours"></div><h3 class="hasAnchor"><span class="header-section-number">1.1.3</span> k-nearest neighbours<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#k-nearest-neighbours" class="anchor-section"></a></h3>
<ol start="14" style="list-style-type: decimal">
<li>Perform k-nearest neighbours on the data with <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-112" style="width: 2.777em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.273em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.39em, 1002.21em, 2.462em, -999.997em); top: -2.267em; left: 0em;"><span class="mrow" id="MathJax-Span-113"><span class="mi" id="MathJax-Span-114" style="font-family: MathJax_Math-italic;">k</span><span class="mo" id="MathJax-Span-115" style="font-family: MathJax_Main; padding-left: 0.255em;">=</span><span class="mn" id="MathJax-Span-116" style="font-family: MathJax_Main; padding-left: 0.255em;">5</span></span><span style="display: inline-block; width: 0px; height: 2.273em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi><mo>=</mo><mn>5</mn></math></span></span><script type="math/tex" id="MathJax-Element-6">k=5</script></span>. How does this perform in-sample? How does this perform out-of-sample? Don’t use the caret package, write your own CV method.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<p>In sample:</p>
<div class="sourceCode hasCopyButton" id="cb33"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(class)</span>
<span id="cb33-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb33-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cvTools)</span>
<span id="cb33-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb33-5"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-5" aria-hidden="true" tabindex="-1"></a>norm_fn <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb33-6"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-6" aria-hidden="true" tabindex="-1"></a>    (x <span class="sc">-</span> <span class="fu">min</span>(x))<span class="sc">/</span>(<span class="fu">max</span>(x) <span class="sc">-</span> <span class="fu">min</span>(x))</span>
<span id="cb33-7"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb33-8"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-8" aria-hidden="true" tabindex="-1"></a>pima_scaled <span class="ot">=</span> pima <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">y =</span> <span class="fu">factor</span>(y)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), </span>
<span id="cb33-9"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.fns =</span> scale))</span>
<span id="cb33-10"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-10" aria-hidden="true" tabindex="-1"></a>X <span class="ot">=</span> pima_scaled <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>y) <span class="sc">%&gt;%</span> <span class="fu">scale</span>()</span>
<span id="cb33-11"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-11" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> pima_scaled <span class="sc">%&gt;%</span> <span class="fu">select</span>(y) <span class="sc">%&gt;%</span> <span class="fu">pull</span>()</span>
<span id="cb33-12"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-12" aria-hidden="true" tabindex="-1"></a>n <span class="ot">=</span> <span class="fu">length</span>(y)</span>
<span id="cb33-13"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-13" aria-hidden="true" tabindex="-1"></a>knn5 <span class="ot">=</span> class<span class="sc">::</span><span class="fu">knn</span>(<span class="at">train =</span> X, <span class="at">test =</span> X, <span class="at">cl =</span> y, <span class="at">k =</span> <span class="dv">5</span>)</span>
<span id="cb33-14"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb33-14" aria-hidden="true" tabindex="-1"></a>caret<span class="sc">::</span><span class="fu">confusionMatrix</span>(knn5, y)<span class="sc">$</span>table</span></code></pre></div>
<pre><code>##           Reference
## Prediction   0   1
##          0 451  80
##          1  49 188</code></pre>
<div class="sourceCode hasCopyButton" id="cb35"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb35-1" aria-hidden="true" tabindex="-1"></a>caret<span class="sc">::</span><span class="fu">confusionMatrix</span>(knn5, y)<span class="sc">$</span>overall[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## Accuracy 
##     0.83</code></pre>
<p>Out of sample:</p>
<div class="sourceCode hasCopyButton" id="cb37"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb37-1" aria-hidden="true" tabindex="-1"></a>K <span class="ot">=</span> <span class="dv">5</span>  <span class="co"># number of CV folds</span></span>
<span id="cb37-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb37-2" aria-hidden="true" tabindex="-1"></a>cvSets <span class="ot">=</span> cvTools<span class="sc">::</span><span class="fu">cvFolds</span>(n, K)  <span class="co"># permute all the data, into 5 folds</span></span>
<span id="cb37-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(cvSets)</span></code></pre></div>
<pre><code>## List of 5
##  $ n      : num 768
##  $ K      : num 5
##  $ R      : num 1
##  $ subsets: int [1:768, 1] 326 330 554 422 111 404 532 506 556 343 ...
##  $ which  : int [1:768] 1 2 3 4 5 1 2 3 4 5 ...
##  - attr(*, "class")= chr "cvFolds"</code></pre>
<div class="sourceCode hasCopyButton" id="cb39"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb39-1" aria-hidden="true" tabindex="-1"></a>cv_acc <span class="ot">=</span> <span class="cn">NA</span>  <span class="co"># initialise results vector</span></span>
<span id="cb39-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>K) {</span>
<span id="cb39-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb39-3" aria-hidden="true" tabindex="-1"></a>    test_id <span class="ot">=</span> cvSets<span class="sc">$</span>subsets[cvSets<span class="sc">$</span>which <span class="sc">==</span> j]</span>
<span id="cb39-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb39-4" aria-hidden="true" tabindex="-1"></a>    X_test <span class="ot">=</span> X[test_id, ]</span>
<span id="cb39-5"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb39-5" aria-hidden="true" tabindex="-1"></a>    X_train <span class="ot">=</span> X[<span class="sc">-</span>test_id, ]</span>
<span id="cb39-6"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb39-6" aria-hidden="true" tabindex="-1"></a>    y_test <span class="ot">=</span> y[test_id]</span>
<span id="cb39-7"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb39-7" aria-hidden="true" tabindex="-1"></a>    y_train <span class="ot">=</span> y[<span class="sc">-</span>test_id]</span>
<span id="cb39-8"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb39-8" aria-hidden="true" tabindex="-1"></a>    fit <span class="ot">=</span> class<span class="sc">::</span><span class="fu">knn</span>(<span class="at">train =</span> X_train, <span class="at">test =</span> X_test, <span class="at">cl =</span> y_train, </span>
<span id="cb39-9"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb39-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">k =</span> <span class="dv">5</span>)</span>
<span id="cb39-10"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb39-10" aria-hidden="true" tabindex="-1"></a>    cv_acc[j] <span class="ot">=</span> caret<span class="sc">::</span><span class="fu">confusionMatrix</span>(fit, y_test)<span class="sc">$</span>overall[<span class="dv">1</span>]</span>
<span id="cb39-11"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb39-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-12"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(cv_acc)</span></code></pre></div>
<pre><code>## [1] 0.74</code></pre>
<p>The out of sample accuracy is 0.74, which is quite a bit lower than the in-sample accuracy of 0.83.</p>
</font><p><font color="blue"></font></p>
<ol start="15" style="list-style-type: decimal">
<li>Let’s establish out of sample performance over a range of <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-117" style="width: 0.634em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.508em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.327em, 1000.51em, 2.399em, -999.997em); top: -2.204em; left: 0em;"><span class="mrow" id="MathJax-Span-118"><span class="mi" id="MathJax-Span-119" style="font-family: MathJax_Math-italic;">k</span></span><span style="display: inline-block; width: 0px; height: 2.21em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-7">k</script></span> values. Put an additional <code>for</code> loop around your <code>CV</code> loop above to get an estimate of out-of-sample performance for <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;50&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-120" style="width: 8.011em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.561em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.39em, 1006.5em, 2.651em, -999.997em); top: -2.267em; left: 0em;"><span class="mrow" id="MathJax-Span-121"><span class="mi" id="MathJax-Span-122" style="font-family: MathJax_Math-italic;">k</span><span class="mo" id="MathJax-Span-123" style="font-family: MathJax_Main; padding-left: 0.255em;">=</span><span class="mn" id="MathJax-Span-124" style="font-family: MathJax_Main; padding-left: 0.255em;">1</span><span class="mo" id="MathJax-Span-125" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-126" style="font-family: MathJax_Main; padding-left: 0.192em;">2</span><span class="mo" id="MathJax-Span-127" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-128" style="font-family: MathJax_Main; padding-left: 0.192em;">…</span><span class="mo" id="MathJax-Span-129" style="font-family: MathJax_Main; padding-left: 0.192em;">,</span><span class="mn" id="MathJax-Span-130" style="font-family: MathJax_Main; padding-left: 0.192em;">50</span></span><span style="display: inline-block; width: 0px; height: 2.273em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.304em; border-left: 0px solid; width: 0px; height: 1.235em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi><mo>=</mo><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mo>…</mo><mo>,</mo><mn>50</mn></math></span></span><script type="math/tex" id="MathJax-Element-8">k=1,2,\ldots,50</script></span>. Visualise your results.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb41"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># range of k in knn to consider</span></span>
<span id="cb41-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-2" aria-hidden="true" tabindex="-1"></a>res <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">k =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>, <span class="at">cv_rep_acc =</span> <span class="cn">NA</span>)</span>
<span id="cb41-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> res<span class="sc">$</span>k) {</span>
<span id="cb41-5"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-5" aria-hidden="true" tabindex="-1"></a>    cvSets <span class="ot">=</span> cvTools<span class="sc">::</span><span class="fu">cvFolds</span>(n, K)  <span class="co"># permute all the data, into 5 folds</span></span>
<span id="cb41-6"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-6" aria-hidden="true" tabindex="-1"></a>    cv_acc <span class="ot">=</span> <span class="cn">NA</span>  <span class="co"># initialise results vector</span></span>
<span id="cb41-7"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>K) {</span>
<span id="cb41-8"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-8" aria-hidden="true" tabindex="-1"></a>        test_id <span class="ot">=</span> cvSets<span class="sc">$</span>subsets[cvSets<span class="sc">$</span>which <span class="sc">==</span> j]</span>
<span id="cb41-9"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-9" aria-hidden="true" tabindex="-1"></a>        X_test <span class="ot">=</span> X[test_id, ]</span>
<span id="cb41-10"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-10" aria-hidden="true" tabindex="-1"></a>        X_train <span class="ot">=</span> X[<span class="sc">-</span>test_id, ]</span>
<span id="cb41-11"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-11" aria-hidden="true" tabindex="-1"></a>        y_test <span class="ot">=</span> y[test_id]</span>
<span id="cb41-12"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-12" aria-hidden="true" tabindex="-1"></a>        y_train <span class="ot">=</span> y[<span class="sc">-</span>test_id]</span>
<span id="cb41-13"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-13" aria-hidden="true" tabindex="-1"></a>        fit <span class="ot">=</span> class<span class="sc">::</span><span class="fu">knn</span>(<span class="at">train =</span> X_train, <span class="at">test =</span> X_test, <span class="at">cl =</span> y_train, </span>
<span id="cb41-14"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">k =</span> i)</span>
<span id="cb41-15"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-15" aria-hidden="true" tabindex="-1"></a>        cv_acc[j] <span class="ot">=</span> caret<span class="sc">::</span><span class="fu">confusionMatrix</span>(fit, y_test)<span class="sc">$</span>overall[<span class="dv">1</span>]</span>
<span id="cb41-16"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb41-17"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-17" aria-hidden="true" tabindex="-1"></a>    res<span class="sc">$</span>cv_rep_acc[i] <span class="ot">=</span> <span class="fu">mean</span>(cv_acc)</span>
<span id="cb41-18"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb41-19"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-19" aria-hidden="true" tabindex="-1"></a>res <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> k, <span class="at">y =</span> cv_rep_acc) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb41-20"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb41-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">which.max</span>(res<span class="sc">$</span>cv_rep_acc), <span class="at">colour =</span> <span class="st">"red"</span>)</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-22-1.png" width="672"></p>
<p>Looks like there’s a maximum around 18.</p>
</font><p><font color="blue"></font></p>
<ol start="16" style="list-style-type: decimal">
<li>Use the <strong>caret</strong> package to perform <em>repeated CV</em> to identify the optimal value for <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-131" style="width: 0.634em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.508em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.327em, 1000.51em, 2.399em, -999.997em); top: -2.204em; left: 0em;"><span class="mrow" id="MathJax-Span-132"><span class="mi" id="MathJax-Span-133" style="font-family: MathJax_Math-italic;">k</span></span><span style="display: inline-block; width: 0px; height: 2.21em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-9">k</script></span>.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb42"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 5-fold repeated CV with 10 repeats</span></span>
<span id="cb42-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb42-2" aria-hidden="true" tabindex="-1"></a>fitControl <span class="ot">=</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"repeatedcv"</span>, </span>
<span id="cb42-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb42-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">number =</span> <span class="dv">5</span>, </span>
<span id="cb42-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb42-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">repeats =</span> <span class="dv">10</span>)</span>
<span id="cb42-5"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb42-5" aria-hidden="true" tabindex="-1"></a>knnFit1 <span class="ot">=</span> <span class="fu">train</span>(y <span class="sc">~</span> ., </span>
<span id="cb42-6"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb42-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> pima_scaled, </span>
<span id="cb42-7"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb42-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"knn"</span>, </span>
<span id="cb42-8"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb42-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">trControl =</span> fitControl,</span>
<span id="cb42-9"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb42-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">tuneLength =</span> <span class="dv">10</span>)</span>
<span id="cb42-10"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb42-10" aria-hidden="true" tabindex="-1"></a>knnFit1</span></code></pre></div>
<pre><code>## k-Nearest Neighbors 
## 
## 768 samples
##   8 predictor
##   2 classes: '0', '1' 
## 
## No pre-processing
## Resampling: Cross-Validated (5 fold, repeated 10 times) 
## Summary of sample sizes: 615, 614, 614, 614, 615, 614, ... 
## Resampling results across tuning parameters:
## 
##   k   Accuracy  Kappa
##    5  0.71      0.35 
##    7  0.73      0.38 
##    9  0.73      0.39 
##   11  0.74      0.40 
##   13  0.74      0.41 
##   15  0.74      0.41 
##   17  0.75      0.41 
##   19  0.74      0.41 
##   21  0.74      0.40 
##   23  0.74      0.40 
## 
## Accuracy was used to select the optimal model using the
##  largest value.
## The final value used for the model was k = 17.</code></pre>
<div class="sourceCode hasCopyButton" id="cb44"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb44-1" aria-hidden="true" tabindex="-1"></a>knnFit1<span class="sc">$</span>results</span>
<span id="cb44-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb44-2" aria-hidden="true" tabindex="-1"></a>knn_acc <span class="ot">=</span> <span class="fu">max</span>(knnFit1<span class="sc">$</span>results<span class="sc">$</span>Accuracy)</span></code></pre></div>
</font><p><font color="blue"></font></p>
</div>
<div id="comparison" class="section level3" number="1.1.4">
<div name="114_Comparison" data-unique="114_Comparison"></div><h3 class="hasAnchor"><span class="header-section-number">1.1.4</span> Comparison<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#comparison" class="anchor-section"></a></h3>
<ol start="17" style="list-style-type: decimal">
<li>Compare the out of sample accuracies for the different methods using 5 fold CV with 10 repeats.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb45"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-1" aria-hidden="true" tabindex="-1"></a>fitControl <span class="ot">=</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"repeatedcv"</span>, </span>
<span id="cb45-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">number =</span> <span class="dv">5</span>, </span>
<span id="cb45-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">repeats =</span> <span class="dv">10</span>)</span>
<span id="cb45-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># decision tree</span></span>
<span id="cb45-5"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-5" aria-hidden="true" tabindex="-1"></a>rpartFit1 <span class="ot">=</span> <span class="fu">train</span>(y <span class="sc">~</span> ., <span class="at">data =</span> pima_scaled, <span class="at">method =</span> <span class="st">"rpart"</span>, <span class="at">trControl =</span> fitControl)</span>
<span id="cb45-6"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-6" aria-hidden="true" tabindex="-1"></a>rpart_acc <span class="ot">=</span> <span class="fu">max</span>(rpartFit1<span class="sc">$</span>results<span class="sc">$</span>Accuracy)</span>
<span id="cb45-7"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="co"># random forests</span></span>
<span id="cb45-8"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-8" aria-hidden="true" tabindex="-1"></a>rfFit1 <span class="ot">=</span> <span class="fu">train</span>(y <span class="sc">~</span> ., <span class="at">data =</span> pima_scaled, <span class="at">method =</span> <span class="st">"rf"</span>, <span class="at">trControl =</span> fitControl) </span>
<span id="cb45-9"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-9" aria-hidden="true" tabindex="-1"></a>rf_acc <span class="ot">=</span> <span class="fu">max</span>(rfFit1<span class="sc">$</span>results<span class="sc">$</span>Accuracy)</span>
<span id="cb45-10"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="co"># glm</span></span>
<span id="cb45-11"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-11" aria-hidden="true" tabindex="-1"></a>glmFit1 <span class="ot">=</span> <span class="fu">train</span>(y <span class="sc">~</span> ., <span class="at">data =</span> pima_scaled, </span>
<span id="cb45-12"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"glm"</span>, <span class="at">family=</span><span class="st">"binomial"</span>, </span>
<span id="cb45-13"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">trControl =</span> fitControl) </span>
<span id="cb45-14"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb45-14" aria-hidden="true" tabindex="-1"></a>glm_acc <span class="ot">=</span> glmFit1<span class="sc">$</span>results<span class="sc">$</span>Accuracy</span></code></pre></div>
<p>Comparing the results</p>
<div class="sourceCode hasCopyButton" id="cb46"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb46-1" aria-hidden="true" tabindex="-1"></a>knn_acc</span></code></pre></div>
<pre><code>## [1] 0.75</code></pre>
<div class="sourceCode hasCopyButton" id="cb48"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb48-1" aria-hidden="true" tabindex="-1"></a>rpart_acc</span></code></pre></div>
<pre><code>## [1] 0.74</code></pre>
<div class="sourceCode hasCopyButton" id="cb50"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb50-1" aria-hidden="true" tabindex="-1"></a>rf_acc</span></code></pre></div>
<pre><code>## [1] 0.77</code></pre>
<div class="sourceCode hasCopyButton" id="cb52"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb52-1" aria-hidden="true" tabindex="-1"></a>glm_acc</span></code></pre></div>
<pre><code>## [1] 0.77</code></pre>
<div class="sourceCode hasCopyButton" id="cb54"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb54-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">=</span> <span class="fu">resamples</span>(<span class="fu">list</span>(<span class="at">knn =</span> knnFit1, <span class="at">tree =</span> rpartFit1, <span class="at">forest =</span> rfFit1, </span>
<span id="cb54-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb54-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">logistic =</span> glmFit1))</span>
<span id="cb54-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(res) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Accuracy"</span>)</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-25-1.png" width="672"></p>
<p>A single decision tree performs worst, followed by knn. Logistic regression performed best, closely followed by random forest.</p>
</font><p><font color="blue"></font></p>
<ol start="18" style="list-style-type: decimal">
<li>Which model do you prefer?</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<p>The logistic regression and the random forest performed similarly well. I (Garth) have a preference towards interpretable and transparent models, and so given the similar performance, I would choose the logistic regression.</p>
</font><p><font color="blue"></font></p>
<ol start="19" style="list-style-type: decimal">
<li>Are our results generalisable to other populations?</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<p>Not really. Our data only considered females at least 21 years old of Pima Indian heritage. If we were implementing it as a diagnostic tool, it’s only been validated against the similar individuals. In order to extend it more broadly we would need to assess its predictive power on different populations (i.e.&nbsp;people of other heritages).</p>
</font><p><font color="blue"></font></p>
</div>
</div>
</div>
<div id="for-practice-after-the-computer-lab" class="section level1" number="2">
<div name="2_For_practice_after_the_computer_lab" data-unique="2_For_practice_after_the_computer_lab"></div><h1 class="hasAnchor"><span class="header-section-number">2</span> For practice after the computer lab<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#for-practice-after-the-computer-lab" class="anchor-section"></a></h1>
<div id="violent-crime-rates-by-us-states" class="section level2" number="2.1">
<div name="21_Violent_crime_rates_by_US_states" data-unique="21_Violent_crime_rates_by_US_states"></div><h2 class="hasAnchor"><span class="header-section-number">2.1</span> Violent crime rates by US states<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#violent-crime-rates-by-us-states" class="anchor-section"></a></h2>
<p>This is the same data (<code>USArrests</code>) we considered for PCA in the lecture. It is built into R, so can be accessed just by typing <code>USArrests</code>.</p>
<div id="hierarchical-clustering" class="section level3" number="2.1.1">
<div name="211_Hierarchical_clustering" data-unique="211_Hierarchical_clustering"></div><h3 class="hasAnchor"><span class="header-section-number">2.1.1</span> Hierarchical clustering<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#hierarchical-clustering" class="anchor-section"></a></h3>
<p>The <code>hclust()</code> function can be used for hierarchical clustering after we have calculated a set of <em>distances</em> (a measure of dissimilarity) between each of the observation The distance calculation can be done using the <code>dist()</code> function, with the default distance metric being the Euclidean distance.</p>
<div class="sourceCode hasCopyButton" id="cb55"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb55-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(USArrests)</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Calculate the pairwise distances using the <code>dist()</code> function applied to the scaled <code>USArrests</code> data frame.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb56"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb56-1" aria-hidden="true" tabindex="-1"></a>us_arrest_dist <span class="ot">=</span> <span class="fu">dist</span>(<span class="fu">scale</span>(USArrests))</span></code></pre></div>
</font><p><font color="blue"></font></p>
<ol start="2" style="list-style-type: decimal">
<li>Use the <code>hclust()</code> function applied to the pairwise distances to perform a hierarchical cluster analysis. Visualise it using the <code>plot()</code> function.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb57"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb57-1" aria-hidden="true" tabindex="-1"></a>us_arrest_hc <span class="ot">=</span> <span class="fu">hclust</span>(us_arrest_dist)</span>
<span id="cb57-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(us_arrest_hc, <span class="at">hang =</span> <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-28-1.png" width="960"></p>
</font><p><font color="blue"></font></p>
<ol start="3" style="list-style-type: decimal">
<li>Use the <code>cutree()</code> function to cut the tree to make 4 groups. Add the identified clusters as a new column in the <code>USArrests</code> data frame. Plot <code>Murder</code> against <code>UrbanPop</code> and colour the points by the identified cluster groups.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb58"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># group into k = 4</span></span>
<span id="cb58-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb58-2" aria-hidden="true" tabindex="-1"></a>us_arrest_groups <span class="ot">=</span> <span class="fu">cutree</span>(us_arrest_hc, <span class="at">k =</span> <span class="dv">4</span>)</span>
<span id="cb58-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb58-3" aria-hidden="true" tabindex="-1"></a>us_arrest <span class="ot">=</span> USArrests <span class="sc">%&gt;%</span> tibble<span class="sc">::</span><span class="fu">rownames_to_column</span>() <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">hc4 =</span> <span class="fu">factor</span>(us_arrest_groups))</span>
<span id="cb58-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb58-4" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">=</span> us_arrest <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> UrbanPop, <span class="at">y =</span> Murder, <span class="at">colour =</span> hc4) <span class="sc">+</span> </span>
<span id="cb58-5"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Hierarchical clusters"</span>)</span>
<span id="cb58-6"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb58-6" aria-hidden="true" tabindex="-1"></a>p1</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-29-1.png" width="672"></p>
</font><p><font color="blue"></font></p>
</div>
<div id="k-means" class="section level3" number="2.1.2">
<div name="212_k-means" data-unique="212_k-means"></div><h3 class="hasAnchor"><span class="header-section-number">2.1.2</span> k-means<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#k-means" class="anchor-section"></a></h3>
<p>Use the <code>kmeans()</code> function to performs k-means clustering on the scaled <code>USArrests</code> data frame and specify 4 clusters using the <code>centers</code> parameter. Plot <code>Murder</code> against <code>UrbanPop</code> and colour the points by the identified cluster groups.</p>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb59"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb59-1" aria-hidden="true" tabindex="-1"></a>us_arrests_kmeans <span class="ot">=</span> <span class="fu">kmeans</span>(<span class="fu">scale</span>(USArrests), <span class="at">centers =</span> <span class="dv">4</span>)</span>
<span id="cb59-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb59-2" aria-hidden="true" tabindex="-1"></a>us_arrest <span class="ot">=</span> us_arrest <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">km4 =</span> <span class="fu">factor</span>(us_arrests_kmeans<span class="sc">$</span>cluster))</span>
<span id="cb59-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb59-3" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">=</span> us_arrest <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x =</span> UrbanPop, <span class="at">y =</span> Murder, <span class="at">colour =</span> km4) <span class="sc">+</span> </span>
<span id="cb59-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"k-means clusters"</span>)</span>
<span id="cb59-5"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb59-5" aria-hidden="true" tabindex="-1"></a>gridExtra<span class="sc">::</span><span class="fu">grid.arrange</span>(p1, p2, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-30-1.png" width="672"></p>
<p>In this case, the k-means and the hierarchical clustering give very similar results when we ask for 4 clusters from both. Note that the group labelling is arbitrary in the colouring (above) or the group labelling below.</p>
<div class="sourceCode hasCopyButton" id="cb60"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb60-1" aria-hidden="true" tabindex="-1"></a>us_arrest <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">tabyl</span>(hc4, km4)</span></code></pre></div>
<pre><code>##  hc4  1  2 3  4
##    1  1  0 7  0
##    2 11  0 0  0
##    3  1  3 1 16
##    4  0 10 0  0</code></pre>
</font><p><font color="blue"></font></p>
</div>
</div>
<div id="who-has-diabetes-continued" class="section level2" number="2.2">
<div name="22_Who_has_diabetes_[Continued]" data-unique="22_Who_has_diabetes_[Continued]"></div><h2 class="hasAnchor"><span class="header-section-number">2.2</span> Who has diabetes? [Continued]<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#who-has-diabetes-continued" class="anchor-section"></a></h2>
<div id="clustering-and-dimension-reduction" class="section level3" number="2.2.1">
<div name="221_Clustering_and_dimension_reduction" data-unique="221_Clustering_and_dimension_reduction"></div><h3 class="hasAnchor"><span class="header-section-number">2.2.1</span> Clustering and dimension reduction<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#clustering-and-dimension-reduction" class="anchor-section"></a></h3>
<p>Let’s ignore the labels for now and let the clustering algorithm try to discover structure in the data.</p>
<ol style="list-style-type: decimal">
<li>Perform k-means clustering on the Pima Indians data (without the <code>y</code> variable) for <span class="math inline"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-134" style="width: 2.777em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.273em; height: 0px; font-size: 122%;"><span style="position: absolute; clip: rect(1.39em, 1002.21em, 2.462em, -999.997em); top: -2.267em; left: 0em;"><span class="mrow" id="MathJax-Span-135"><span class="mi" id="MathJax-Span-136" style="font-family: MathJax_Math-italic;">k</span><span class="mo" id="MathJax-Span-137" style="font-family: MathJax_Main; padding-left: 0.255em;">=</span><span class="mn" id="MathJax-Span-138" style="font-family: MathJax_Main; padding-left: 0.255em;">2</span></span><span style="display: inline-block; width: 0px; height: 2.273em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 1.004em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi><mo>=</mo><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-10">k=2</script></span>. Create a confusion matrix and compare the clusters discovered by the k-means algorithm with the observed outcomes (<code>pima$y</code>).</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb62"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb62-1" aria-hidden="true" tabindex="-1"></a>km <span class="ot">=</span> <span class="fu">kmeans</span>(X, <span class="at">centers =</span> <span class="dv">2</span>, <span class="at">nstart =</span> <span class="dv">10</span>)</span>
<span id="cb62-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb62-2" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">=</span> <span class="fu">table</span>(km<span class="sc">$</span>cluster, y)</span>
<span id="cb62-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">diag</span>(tab))<span class="sc">/</span><span class="fu">sum</span>(tab)</span></code></pre></div>
<pre><code>## [1] 0.32</code></pre>
<p>Without knowing anything about the labels, the k-means looks like it has achieved an accuracy of 0.32. HOWEVER! we should compare this with the baseline accuracy where we just assign all observations to the largest group:</p>
<div class="sourceCode hasCopyButton" id="cb64"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb64-1" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">=</span> <span class="fu">table</span>(y)</span>
<span id="cb64-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb64-2" aria-hidden="true" tabindex="-1"></a>tab</span></code></pre></div>
<pre><code>## y
##   0   1 
## 500 268</code></pre>
<div class="sourceCode hasCopyButton" id="cb66"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(tab)<span class="sc">/</span><span class="fu">sum</span>(tab)</span></code></pre></div>
<pre><code>## [1] 0.65</code></pre>
<p>So if we just say all observations don’t have diabetes our accuracy is 65%, so k-means hasn’t done a particularly good job on differentiating by diabetes status, but that’s OK, we weren’t asking it to do that, we were just asking it to find two similar groups in the data.</p>
</font><p><font color="blue"></font></p>
<ol start="2" style="list-style-type: decimal">
<li>Use PCA to perform dimension reduction on the data (again without the <code>y</code> variable). How much of the variation in the data can be explained by the first two principal components?</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb68"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb68-1" aria-hidden="true" tabindex="-1"></a>pca_pima <span class="ot">=</span> <span class="fu">princomp</span>(X)</span>
<span id="cb68-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb68-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pca_pima)</span></code></pre></div>
<pre><code>## Importance of components:
##                        Comp.1 Comp.2 Comp.3 Comp.4 Comp.5 Comp.6
## Standard deviation       1.45   1.31   1.01   0.94  0.873  0.826
## Proportion of Variance   0.26   0.22   0.13   0.11  0.095  0.085
## Cumulative Proportion    0.26   0.48   0.61   0.72  0.812  0.897
##                        Comp.7 Comp.8
## Standard deviation      0.648  0.636
## Proportion of Variance  0.052  0.051
## Cumulative Proportion   0.949  1.000</code></pre>
<p>The first two principal components account for 48% of the variance in the data.</p>
<div class="sourceCode hasCopyButton" id="cb70"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages('remotes')</span></span>
<span id="cb70-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="co"># remotes::install_github('vqv/ggbiplot') library(ggbiplot)</span></span>
<span id="cb70-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb70-3" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">=</span> ggbiplot<span class="sc">::</span><span class="fu">ggscreeplot</span>(pca_pima) <span class="sc">+</span> <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">16</span>) <span class="sc">+</span> </span>
<span id="cb70-4"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb70-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Prop. of explained variance"</span>)</span>
<span id="cb70-5"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb70-5" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">=</span> ggbiplot<span class="sc">::</span><span class="fu">ggscreeplot</span>(pca_pima, <span class="at">type =</span> <span class="st">"cev"</span>) <span class="sc">+</span> <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">16</span>) <span class="sc">+</span> </span>
<span id="cb70-6"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb70-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">" Cumulative prop. of explained variance"</span>)</span>
<span id="cb70-7"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb70-7" aria-hidden="true" tabindex="-1"></a>gridExtra<span class="sc">::</span><span class="fu">grid.arrange</span>(p1, p2, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-35-1.png" width="672"></p>
</font><p><font color="blue"></font></p>
<ol start="3" style="list-style-type: decimal">
<li>Visualise the first two principal components on a biplot. On separate plots, overlay</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>the clusters identified by the k-means clustering, and</li>
<li>the original data labels.</li>
</ol>
<p><font color="blue"></font></p><font color="blue">
<div class="sourceCode hasCopyButton" id="cb71"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># biplot(pca_pima) # base graphics works just fine</span></span>
<span id="cb71-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb71-2" aria-hidden="true" tabindex="-1"></a>ggbiplot<span class="sc">::</span><span class="fu">ggbiplot</span>(pca_pima, <span class="at">labels.size =</span> <span class="dv">5</span>, <span class="at">varname.size =</span> <span class="dv">8</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb71-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb71-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-36-1.png" width="672"></p>
<div class="sourceCode hasCopyButton" id="cb72"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb72-1" aria-hidden="true" tabindex="-1"></a>ggbiplot<span class="sc">::</span><span class="fu">ggbiplot</span>(pca_pima, <span class="at">labels.size =</span> <span class="dv">5</span>, <span class="at">varname.size =</span> <span class="dv">8</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>, </span>
<span id="cb72-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">groups =</span> <span class="fu">factor</span>(km<span class="sc">$</span>cluster)) <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"k-means clustering"</span>) <span class="sc">+</span> </span>
<span id="cb72-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb72-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-36-2.png" width="672"></p>
<div class="sourceCode hasCopyButton" id="cb73"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb73-1" aria-hidden="true" tabindex="-1"></a>ggbiplot<span class="sc">::</span><span class="fu">ggbiplot</span>(pca_pima, <span class="at">labels.size =</span> <span class="dv">5</span>, <span class="at">varname.size =</span> <span class="dv">8</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>, </span>
<span id="cb73-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb73-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">groups =</span> y) <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"True classification"</span>) <span class="sc">+</span> </span>
<span id="cb73-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb73-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-36-3.png" width="672"></p>
<p>Using the <strong>factoextra</strong> package which plots the two clusters in the space spanned by the first two principal components:</p>
<div class="sourceCode hasCopyButton" id="cb74"><button type="button" class="btn btn-link btn-copy-ex" title="" aria-label="" data-toggle="tooltip" data-placement="top" data-trigger="hover" data-clipboard-copy=""><svg class="svg-inline--fa fa-copy fa-w-14" aria-hidden="true" data-prefix="fa" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"></path></svg><!-- <i class="fa fa-copy"></i> --></button><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages('factoextra')</span></span>
<span id="cb74-2"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span>
<span id="cb74-3"><a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_cluster</span>(km, <span class="at">data =</span> X, <span class="at">geom =</span> <span class="st">"point"</span>) <span class="sc">+</span> <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="./Lab 4B_ Week 12_files/unnamed-chunk-37-1.png" width="672"></p>
</font><p><font color="blue"></font></p>
</div>
</div>
<div id="datacamp" class="section level2" number="2.3">
<div name="23_DataCamp" data-unique="23_DataCamp"></div><h2 class="hasAnchor"><span class="header-section-number">2.3</span> DataCamp<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#datacamp" class="anchor-section"></a></h2>
<p>As additional practice questions, I recommend these two DataCamp chapters:</p>
<ul>
<li><a href="https://campus.datacamp.com/courses/multiple-and-logistic-regression/logistic-regression-4">
<svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;">
  <path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"></path>
</svg> Logistic Regression</a></li>
<li><a href="https://campus.datacamp.com/courses/supervised-learning-in-r-classification/chapter-4-classification-trees">
<svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;">
  <path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"></path>
</svg> Decision trees</a></li>
<li><a href="https://campus.datacamp.com/courses/supervised-learning-in-r-classification/chapter-1-k-nearest-neighbors-knn">
<svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;">
  <path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"></path>
</svg> k-nearest neighbors</a></li>
<li><a href="https://www.datacamp.com/courses/cluster-analysis-in-r">
<svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;">
  <path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"></path>
</svg> Cluster analysis in R</a></li>
<li><a href="https://campus.datacamp.com/courses/unsupervised-learning-in-r/dimensionality-reduction-with-pca?ex=1">
<svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;">
  <path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"></path>
</svg> Dimension reduction with PCA</a></li>
</ul>
</div>
</div>
<div id="references" class="section level1" number="3">
<div name="3_References" data-unique="3_References"></div><h1 class="hasAnchor"><span class="header-section-number">3</span> References<a href="https://pages.github.sydney.edu.au/DATA2002/2020/lab04b_s.html#references" class="anchor-section"></a></h1>
<p>For more details on decision trees see Hastie, Tibshirani, and Friedman (2009; section 9.2) and James, Witten, Hastie, et al.&nbsp;(2017; chapter 8).</p>
<p>Hastie, T., R. Tibshirani, and J. Friedman (2009). <em>The Elements of Statistical Learning</em>. 2nd ed.&nbsp;Springer Series in Statistics. New York, NY, USA: Springer. URL: <a href="https://web.stanford.edu/~hastie/ElemStatLearn/">https://web.stanford.edu/~hastie/ElemStatLearn/</a>.</p>
<p>Hlavac, M. (2018). <em>stargazer: Well-Formatted Regression and Summary Statistics Tables</em>. R package version 5.2.2. Central European Labour Studies Institute (CELSI). Bratislava, Slovakia. URL: <a href="https://cran.r-project.org/package=stargazer">https://CRAN.R-project.org/package=stargazer</a>.</p>
<p>James, G., D. Witten, T. Hastie, et al.&nbsp;(2017). <em>An Introduction to Statistical Learning: With Applications in R</em>. New York: Springer. URL: <a href="https://www-bcf.usc.edu/~gareth/ISL/">https://www-bcf.usc.edu/~gareth/ISL/</a>.</p>
<p>Jed Wing, M. K. C. from, S. Weston, A. Williams, et al. (2018). <em>caret: Classification and Regression Training</em>. R package version 6.0-80. URL: <a href="https://cran.r-project.org/package=caret">https://CRAN.R-project.org/package=caret</a>.</p>
<p>Johannes, R. S. (1988). “Using the ADAP learning algorithm to forecast the onset of diabetes mellitus”. In: <em>Johns Hopkins APL Technical Digest</em> 10, pp.&nbsp;262-266.</p>
<p>Liaw, A. and M. Wiener (2002). “Classification and Regression by randomForest”. In: <em>R News</em> 2.3, pp.&nbsp;18-22. URL: <a href="https://cran.r-project.org/doc/Rnews/">https://CRAN.R-project.org/doc/Rnews/</a>.</p>
<p>Therneau, T. and B. Atkinson (2018). <em>rpart: Recursive Partitioning and Regression Trees</em>. R package version 4.1-13. URL: <a href="https://cran.r-project.org/package=rpart">https://CRAN.R-project.org/package=rpart</a>.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>



<div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div role="log" aria-live="assertive" aria-relevant="additions" class="ui-helper-hidden-accessible"></div><div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Size3, sans-serif;"></div></div></body><iframe id="oneNoteWebClipper" src="./Lab 4B_ Week 12_files/clipper.html" style="left: auto; right: 0px; top: 0px; bottom: auto; border: none; margin: 0px; max-height: none; max-width: none; min-height: 0px; min-width: 0px; overflow: hidden; padding: 0px; position: fixed; transition: initial; z-index: 2147483647; width: 349px; height: 282px; display: none;"></iframe></html>